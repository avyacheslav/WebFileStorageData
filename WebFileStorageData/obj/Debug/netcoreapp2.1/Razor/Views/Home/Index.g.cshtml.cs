#pragma checksum "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "393f6436ac5f42fd1be0acbb09dc1713d2a47860"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Home_Index), @"mvc.1.0.view", @"/Views/Home/Index.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Home/Index.cshtml", typeof(AspNetCore.Views_Home_Index))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\_ViewImports.cshtml"
using WebFileStorageData;

#line default
#line hidden
#line 2 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\_ViewImports.cshtml"
using WebFileStorageData.Models;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"393f6436ac5f42fd1be0acbb09dc1713d2a47860", @"/Views/Home/Index.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"9af34138b6d14cf389b184c7894692158306dc62", @"/Views/_ViewImports.cshtml")]
    public class Views_Home_Index : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<IFileRepository>
    {
        #line hidden
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(24, 2, true);
            WriteLiteral("\r\n");
            EndContext();
            BeginContext(26, 3562, false);
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "ffb4cc8988274cdea30d677be9f770d6", async() => {
                BeginContext(32, 2, true);
                WriteLiteral("\r\n");
                EndContext();
#line 4 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
     if (Model.FileNames == null || Model.FileNames.Count() == 0)
    {

#line default
#line hidden
                BeginContext(108, 38, true);
                WriteLiteral("        <h3>Files was not found</h3>\r\n");
                EndContext();
#line 7 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
    }
    else
    {

#line default
#line hidden
                BeginContext(170, 32, true);
                WriteLiteral("        <table align=\"center\">\r\n");
                EndContext();
#line 11 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
             if (!string.IsNullOrEmpty(Model.SelectedFile))
            {
                var database = Model.SelectedFile.Split("\\").Last();

#line default
#line hidden
                BeginContext(349, 153, true);
                WriteLiteral("                <tr>\r\n                    <td width=\"200\" height=\"60\"><label><strong>Database name</strong></label></td>\r\n                    <td><label>");
                EndContext();
                BeginContext(503, 8, false);
#line 16 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
                          Write(database);

#line default
#line hidden
                EndContext();
                BeginContext(511, 163, true);
                WriteLiteral("</label></td>\r\n                </tr>\r\n                <tr>\r\n                    <td><label><strong>File path</strong></label></td>\r\n                    <td><label>");
                EndContext();
                BeginContext(675, 18, false);
#line 20 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
                          Write(Model.SelectedFile);

#line default
#line hidden
                EndContext();
                BeginContext(693, 121, true);
                WriteLiteral("</label></td>\r\n                    <td><button type=\"button\" id=\"filesListBtn\">...</button></td>\r\n                </tr>\r\n");
                EndContext();
#line 23 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
                 if (Model.FileData == null)
                {

#line default
#line hidden
                BeginContext(879, 223, true);
                WriteLiteral("                    <tr>\r\n                        <td height=\"60\">\r\n                            <button type=\"submit\" formmethod=\"post\">Показать результат</button>\r\n                        </td>\r\n                    </tr>\r\n");
                EndContext();
#line 30 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
                }

#line default
#line hidden
#line 30 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
                 
            }

#line default
#line hidden
                BeginContext(1136, 18, true);
                WriteLiteral("        </table>\r\n");
                EndContext();
#line 33 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
    }

#line default
#line hidden
                BeginContext(1161, 2, true);
                WriteLiteral("\r\n");
                EndContext();
#line 35 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
    if (Model.FileData != null && Model.FileData.Count() > 1)
    {

#line default
#line hidden
                BeginContext(1233, 84, true);
                WriteLiteral("        <br /><br />\r\n        <table id=\"tableFileData\" border=\"1\" align=\"center\">\r\n");
                EndContext();
#line 39 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
         
            int headLineLength = -1;

           

#line default
#line hidden
#line 42 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
            for(var line = 0; line < Model.FileData.Count(); line++)
            {
                var lineData = Model.FileData[line].Split("\t");

#line default
#line hidden
                BeginContext(1519, 18, true);
                WriteLiteral("            <tr>\r\n");
                EndContext();
#line 46 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
                for (var column = 0; column < lineData.Length; column++)
                {
                    var data = lineData[column];
                    var key = (line.ToString() + ',' + column.ToString());
                    if (line == 0)
                    {
                        headLineLength = lineData.Length;

#line default
#line hidden
                BeginContext(1874, 34, true);
                WriteLiteral("                        <th><input");
                EndContext();
                BeginWriteAttribute("name", " name=\"", 1908, "\"", 1919, 1);
#line 53 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
WriteAttributeValue("", 1915, key, 1915, 4, false);

#line default
#line hidden
                EndWriteAttribute();
                BeginWriteAttribute("value", " value=\"", 1920, "\"", 1933, 1);
#line 53 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
WriteAttributeValue("", 1928, data, 1928, 5, false);

#line default
#line hidden
                EndWriteAttribute();
                BeginContext(1934, 19, true);
                WriteLiteral(" readonly /></th>\r\n");
                EndContext();
#line 54 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
                    }
                    else
                    {

#line default
#line hidden
                BeginContext(2025, 24, true);
                WriteLiteral("                        ");
                EndContext();
                BeginContext(2051, 17, true);
                WriteLiteral("<td><input name=\"");
                EndContext();
                BeginContext(2069, 3, false);
#line 57 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
                                      Write(key);

#line default
#line hidden
                EndContext();
                BeginContext(2072, 9, true);
                WriteLiteral("\" value=\"");
                EndContext();
                BeginContext(2082, 4, false);
#line 57 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
                                                   Write(data);

#line default
#line hidden
                EndContext();
                BeginContext(2086, 45, true);
                WriteLiteral("\" onchange=\"tableDataChanged(this)\" /></td>\r\n");
                EndContext();
#line 58 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
                    }
                }

#line default
#line hidden
                BeginContext(2173, 15, true);
                WriteLiteral("               ");
                EndContext();
#line 60 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
                for (var i = lineData.Length; i < headLineLength; i++)
                {
                    var key = (line.ToString() + ',' + i.ToString());

#line default
#line hidden
                BeginContext(2335, 20, true);
                WriteLiteral("                    ");
                EndContext();
                BeginContext(2357, 17, true);
                WriteLiteral("<td><input name=\"");
                EndContext();
                BeginContext(2375, 3, false);
#line 63 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
                                  Write(key);

#line default
#line hidden
                EndContext();
                BeginContext(2378, 45, true);
                WriteLiteral("\" onchange=\"tableDataChanged(this)\" /></td>\r\n");
                EndContext();
#line 64 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
                }

#line default
#line hidden
                BeginContext(2442, 19, true);
                WriteLiteral("            </tr>\r\n");
                EndContext();
#line 66 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
            }

#line default
#line hidden
                BeginContext(2476, 425, true);
                WriteLiteral(@"            <tr id=""lastRow"">
                <td style=""border: hidden""><button type=""button"" onclick=""addLine()"">+</button></td>
                <td style=""border: hidden""></td>
                <td style=""border: hidden"">
                    <button type=""button"" id=""saveBtn"" style=""float: right; display: none;"">
                        Save
                    </button>
                </td>
            </tr>
");
                EndContext();
                BeginContext(2912, 18, true);
                WriteLiteral("        </table>\r\n");
                EndContext();
#line 78 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
    }

#line default
#line hidden
                BeginContext(2937, 271, true);
                WriteLiteral(@"    <h4 id=""savedLabel"" style=""display: none; text-align: center;""><label>Saved</label></h4>
    
    <div id=""selectFileModal"" class=""modal"">
        <div class=""modal-content"">
            <span class=""close"">&times;</span>
            <h4>Доступные файлы</h4>

");
                EndContext();
#line 86 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
             foreach (var filename in Model.FileNames)
            {

#line default
#line hidden
                BeginContext(3279, 83, true);
                WriteLiteral("                <button class=\"select-file-button\" type=\"submit\" name=\"newSelected\"");
                EndContext();
                BeginWriteAttribute("value", " value=\"", 3362, "\"", 3381, 1);
#line 88 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
WriteAttributeValue("", 3370, filename, 3370, 11, false);

#line default
#line hidden
                EndWriteAttribute();
                BeginContext(3382, 19, true);
                WriteLiteral(" formmethod=\"post\">");
                EndContext();
                BeginContext(3402, 8, false);
#line 88 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
                                                                                                                     Write(filename);

#line default
#line hidden
                EndContext();
                BeginContext(3410, 35, true);
                WriteLiteral("</button>\r\n                <br />\r\n");
                EndContext();
#line 90 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
            }

#line default
#line hidden
                BeginContext(3460, 88, true);
                WriteLiteral("        </div>\r\n    </div>\r\n    <input id=\"selectedFile\" hidden=\"hidden\" name=\"selected\"");
                EndContext();
                BeginWriteAttribute("value", " value=\"", 3548, "\"", 3575, 1);
#line 93 "C:\Users\1\source\repos\WebFileStorageData\WebFileStorageData\Views\Home\Index.cshtml"
WriteAttributeValue("", 3556, Model.SelectedFile, 3556, 19, false);

#line default
#line hidden
                EndWriteAttribute();
                BeginContext(3576, 5, true);
                WriteLiteral(" />\r\n");
                EndContext();
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            EndContext();
            BeginContext(3588, 2552, true);
            WriteLiteral(@"


<script>
    var changeDict = new Map();
    var selectedFile = document.getElementById(""selectedFile"");    
    var modal = document.getElementById(""selectFileModal"");
    var btnOpenModal = document.getElementById(""filesListBtn"");
    var span = document.getElementsByClassName(""close"")[0];
    var saveBtn = document.getElementById(""saveBtn"");
    var savedLbl = document.getElementById(""savedLabel"");

    changeDict.set(""selectedFile"", selectedFile.value);
    
    btnOpenModal.onclick = function () {
        modal.style.display = ""block"";
    }
        
    span.onclick = function () {
        modal.style.display = ""none"";
    }
    
    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = ""none"";
        }
    }

    function mapToJsonObj(inputMap) {
        let obj = {};

        inputMap.forEach(function (value, key) {
            obj[key] = value
        });

        return obj;
    }

    function tableDataCh");
            WriteLiteral(@"anged(obj) {
        var name = obj.name;
        var value = obj.value;
        changeDict.set(obj.name, obj.value);
        saveBtn.style.display = ""inline"";
        savedLbl.style.display = ""none"";
    }

    function addLine(event) {
        var tbody = document.getElementById(""tableFileData"").getElementsByTagName(""TBODY"")[0];
        var rowNum = tbody.children.length;
        var tableRef = document.getElementById(""tableFileData"");        
        var newRow = tableRef.insertRow(rowNum - 1);

        var cellNum = tbody.children[0].children.length;

        for (let i = 0; i < cellNum; i++) {
            let newCell = newRow.insertCell();
            let newInput = document.createElement('input');
            newInput.name = (rowNum - 1).toString() + "","" + i.toString();
            newInput.onchange = () => new tableDataChanged(newInput);
            newCell.appendChild(newInput);
        }
    }

    if (saveBtn != null) {
        saveBtn.onclick = function event() {
        ");
            WriteLiteral(@"    $.ajax({
                type: ""post"",
                url: ""/Home/Update"",
                dataType: ""json"",
                data: mapToJsonObj(changeDict),
                success: function (response) {
                    if (response == true) {
                        savedLbl.style.display = ""block"";
                    } else {
                        alert(""Сохранить в файл не удалось"");
                    }
                }
            });
        }
    }
</script>


");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<IFileRepository> Html { get; private set; }
    }
}
#pragma warning restore 1591
